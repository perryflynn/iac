---
# roles/nginxuserserver/tasks/main.yml

- name: Ensure parameters
  assert:
    that:
      - ansible_distribution == 'Archlinux'

- name: Install NGINX
  package:
    name:
      - nginx
      - nginx-mod-headers-more
  notify:
    - Restart NGINX

- name: Enable NGINX
  systemd_service:
    enabled: true
    name: nginx
  notify:
    - Restart NGINX

- name: Add nginx.conf
  template:
    src: files/nginx.conf.j2
    dest: /etc/nginx/nginx.conf
    owner: root
    group: root
    mode: u=rw,go=r
  notify:
    - Restart NGINX
