---
- name: Configure my retired X230 Thinkpad
  hosts:
    - mydemoarch

  tasks:

    - name: Shell Tools
      block:

        - name: Install shell tools
          package:
            name:
              - vim
              - htop
              - curl
              - mc
              - screen
              - git
              - ncdu
              - wget
              - less

        - name: Create vimrc
          copy:
            dest: /root/.vimrc
            owner: root
            group: root
            mode: u=rw,go=-
            content: |
              set background=dark
              syntax on
              set mouse=

    - name: Install X11
      include_role:
        name: xorgsetup
      vars:
        xorg_video_driver: "{{ 'vmware' if ansible_product_name == 'VirtualBox' else 'intel' }}"

    - name: Install XFCE
      include_role:
        name: xfcesetup

    - name: Desktop Tools
      block:

        - name: Install Desktop Tools
          package:
            name:
              - firefox
              - code
              - element-desktop
              - keepass
              - bitwarden
              - gimp
              - vlc
              - virt-viewer
              - nextcloud-client
